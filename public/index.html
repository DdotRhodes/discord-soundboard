<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Discord Soundboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="header-title-row">
      <h1>Soundboard</h1>
      <button id="help-toggle" class="help-toggle-btn" type="button" aria-label="Toggle setup guide">?</button>
    </div>
    <div id="setup-guide" class="setup-guide" hidden>
      <div class="guide-content">
        <p class="guide-title">Quick Setup</p>
        <div class="guide-steps">
          <div class="guide-step">
            <span class="guide-num">1</span>
            <div>
              <strong>Discord Output</strong> &mdash; Set this to your virtual audio cable (e.g. VB-Cable, VoiceMeeter). In Discord, set your <em>Input Device</em> to the same cable so others hear your sounds.
            </div>
          </div>
          <div class="guide-step">
            <span class="guide-num">2</span>
            <div>
              <strong>Microphone</strong> &mdash; Your physical mic. Turn on <em>MIC</em> to passthrough your voice alongside sounds through the virtual cable.
            </div>
          </div>
          <div class="guide-step">
            <span class="guide-num">3</span>
            <div>
              <strong>Monitor</strong> &mdash; Your real speakers/headphones. Lets you hear what you're sending to Discord.
            </div>
          </div>
          <div class="guide-step">
            <span class="guide-num">4</span>
            <div>
              <strong>Voice Effects</strong> &mdash; Apply real-time effects to your mic (Deep, Robot, Echo, etc.). Only active when MIC is on.
            </div>
          </div>
        </div>
        <button id="guide-dismiss" class="guide-dismiss" type="button">Got it</button>
      </div>
    </div>
    <div class="controls">
      <div class="control-section">
        <div class="section-label">Audio Routing</div>
        <div class="section-controls">
          <div class="control-group">
            <label for="device-select">Discord Output</label>
            <select id="device-select">
              <option value="default">Default</option>
            </select>
          </div>
          <div class="control-group">
            <label for="mic-select">Microphone</label>
            <select id="mic-select">
              <option value="none">Off</option>
            </select>
          </div>
          <div class="control-group">
            <label for="monitor-select">Monitor</label>
            <select id="monitor-select">
              <option value="none">Off</option>
            </select>
          </div>
        </div>
      </div>
      <div class="control-divider"></div>
      <div class="control-section">
        <div class="section-label">Voice</div>
        <div class="section-controls">
          <div class="control-group">
            <label for="voice-select">Effect</label>
            <select id="voice-select">
              <option value="clean">Clean</option>
              <option value="deep">Deep</option>
              <option value="high">High</option>
              <option value="robot">Robot</option>
              <option value="megaphone">Megaphone</option>
              <option value="echo">Echo</option>
              <option value="demon">Demon</option>
            </select>
          </div>
          <div class="control-group">
            <label for="mic-gain-slider">Gain</label>
            <input type="range" id="mic-gain-slider" min="0" max="4" step="0.1" value="1.5" aria-label="Microphone gain">
            <span id="mic-gain-val" class="slider-val">1.5x</span>
          </div>
          <div class="control-group">
            <button id="mic-toggle" class="mic-btn off" title="Mic passthrough off">MIC OFF</button>
            <button id="mic-monitor" class="mic-monitor-btn" title="Listen to your mic through your speakers">Monitor</button>
          </div>
        </div>
      </div>
      <div class="control-divider"></div>
      <div class="control-section">
        <div class="section-label">Playback</div>
        <div class="section-controls">
          <div class="control-group">
            <label for="volume-slider">Volume</label>
            <input type="range" id="volume-slider" min="0" max="1" step="0.05" value="0.8" aria-label="Master volume">
          </div>
          <button id="stop-sound" class="stop-btn" type="button" title="Stop current sound" aria-label="Stop current sound">Stop</button>
        </div>
      </div>
    </div>
  </header>

  <div id="tts-panel" class="collapsible-panel">
    <button class="collapsible-header" type="button" aria-expanded="true">
      <span class="collapsible-title">Text to Speech</span>
      <span class="collapsible-hint">ElevenLabs AI voices</span>
      <span class="collapsible-chevron"></span>
    </button>
    <div class="collapsible-body">
      <div class="tts-top-row">
        <input type="password" id="tts-apikey" placeholder="ElevenLabs API key" autocomplete="off" aria-label="ElevenLabs API key">
        <select id="tts-voice" aria-label="TTS voice">
          <option value="">Enter API key...</option>
        </select>
        <button id="tts-preview" class="tts-preview-btn" title="Preview voice" aria-label="Preview voice">&#9654;</button>
        <select id="tts-model" aria-label="TTS model">
          <option value="eleven_multilingual_v2">Multilingual v2 (Best quality)</option>
          <option value="eleven_turbo_v2_5">Turbo v2.5 (Fast)</option>
          <option value="eleven_flash_v2_5">Flash v2.5 (Fastest)</option>
          <option value="eleven_monolingual_v1">Monolingual v1 (English)</option>
        </select>
        <button id="tts-speak" class="tts-speak-btn" aria-label="Speak text">Speak</button>
      </div>
      <div class="tts-settings-row">
        <label>Stability <input type="range" id="tts-stability" min="0" max="100" value="50" aria-label="Voice stability"> <span id="tts-stability-val">0.50</span></label>
        <label>Similarity <input type="range" id="tts-similarity" min="0" max="100" value="75" aria-label="Voice similarity"> <span id="tts-similarity-val">0.75</span></label>
        <label>Style <input type="range" id="tts-style" min="0" max="100" value="0" aria-label="Voice style"> <span id="tts-style-val">0.00</span></label>
        <label>Speed <input type="range" id="tts-speed" min="10" max="500" value="100" aria-label="Speech speed"> <span id="tts-speed-val">1.0x</span></label>
        <label class="tts-checkbox"><input type="checkbox" id="tts-boost"> Speaker Boost</label>
        <button id="tts-defaults" class="defaults-btn" type="button" title="Reset to defaults">Defaults</button>
      </div>
      <div id="tts-usage" class="tts-usage" style="display:none;">
        <div class="tts-usage-bar"><div class="tts-usage-fill"></div></div>
        <span class="tts-usage-text"></span>
      </div>
      <textarea id="tts-text" placeholder="Type something to say in Discord..." rows="2" maxlength="2500" aria-label="Text to speak"></textarea>
    </div>
  </div>

  <div id="sfx-panel" class="collapsible-panel">
    <button class="collapsible-header" type="button" aria-expanded="true">
      <span class="collapsible-title">Sound Effects</span>
      <span class="collapsible-hint">AI-generated sounds</span>
      <span class="collapsible-chevron"></span>
    </button>
    <div class="collapsible-body">
      <div class="sfx-controls">
        <input type="text" id="sfx-text" placeholder="Describe a sound (e.g. thunder rolling in the distance)" aria-label="Sound effect description">
        <button id="sfx-generate" class="tts-speak-btn" aria-label="Generate sound effect">Generate</button>
      </div>
      <div class="sfx-sliders">
        <label>Duration <input type="range" id="sfx-duration" min="0.5" max="22" step="0.5" value="5" aria-label="Effect duration"> <span id="sfx-duration-val">5s</span></label>
        <label>Prompt Influence <input type="range" id="sfx-influence" min="0" max="1" step="0.05" value="0.3" aria-label="Prompt influence"> <span id="sfx-influence-val">0.3</span></label>
        <button id="sfx-defaults" class="defaults-btn" type="button" title="Reset to defaults">Defaults</button>
      </div>
      <div id="sfx-result" style="display:none;">
        <audio id="sfx-audio" controls></audio>
        <button id="sfx-save" class="sfx-save-btn" aria-label="Save sound effect to soundboard">Save to Soundboard</button>
      </div>
    </div>
  </div>

  <div id="upload-area" tabindex="0" role="button" aria-label="Upload audio files â€” drag and drop or click to browse">
    <p>Drag & drop audio files here, or click to browse</p>
    <p class="subtext">Supports mp3, wav, ogg, webm, m4a (max 10 MB)</p>
    <input type="file" id="file-input" accept=".mp3,.wav,.ogg,.webm,.m4a" multiple hidden>
  </div>

  <div id="search-bar">
    <input type="text" id="sound-search" placeholder="Search sounds by name or vibe (e.g. awkward, fail, hype, troll...)" aria-label="Search sounds">
  </div>
  <div id="category-bar"></div>
  <div id="sound-grid"></div>

  <div id="toast-container" aria-live="polite"></div>

  <div id="modal-overlay" class="modal-hidden">
    <div class="modal-box">
      <p class="modal-message"></p>
      <input type="text" class="modal-input" hidden>
      <div class="modal-actions">
        <button class="modal-cancel">Cancel</button>
        <button class="modal-confirm">Confirm</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
